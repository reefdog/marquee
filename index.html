<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Showtimes</title>
  <link rel="stylesheet" href="/assets/normalize.css" type="text/css" media="screen">
  <style type="text/css">
    *,*:before,*:after {
      box-sizing: border-box;
    }

    html {
      font-size: 10px;
    }

    body {
      font-family: Inconsolata, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      font-size: 1.4rem;
      line-height: 2.2rem;
      color: black;
      background: white;
      padding: 1rem;
    }

    @media (min-width: 600px) {
      body {
        padding: 4rem;
      }
    }


    .primary-section {
      margin: 7rem 0;
    }

    .secondary-section {
      margin: 0 0 2rem 0;
    }

    .primary-label {
      font-size: 2.2rem;
      font-weight: 700;
      margin: 0 0 2rem 0;
    }
    .secondary-label {
      font-size: 1.6rem;
      font-weight: 600;
      margin: 0 0 0.5rem 0;
    }

    .showtime-block {
      margin: 0;
      padding: 0;
      list-style-type: none;
    }
    .showtime-block > li {
      margin: 0;
      padding: 0;
      display: inline-block;
      margin-right: 2rem;
    }

    .primary-label a,
    .secondary-label a,
    .showtime-block a {
      color: inherit;
      text-decoration: none;
    }
    .primary-label a:hover,
    .secondary-label a:hover,
    .showtime-block a:hover {
      text-decoration: underline;
    }

    .threed,
    .imax {
      font-size: 1.2rem;
      font-weight: bold;
    }
    .threed-blue {
      color: blue;
    }
    .threed-red {
      color: red;;
    }

    #get-showtimes-form {
      display: flex;
      flex-wrap: wrap;
      height: 6rem;
      line-height: 1.5rem;
    }

    .input-group {
      display: flex;
      margin-right: 2rem;
    }
    .input-group:last-child {
      margin-right: 0;
    }

    .input-group > label {
    }

    .block-radio-button {
      cursor: pointer;
    }
    .block-radio-button > input[type=radio] {
      display: none;
    }
    .block-radio-button > .label {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100%;
      border: 0.1rem solid gray;
      text-align: center;
      white-space: nowrap;
      padding-left: 1.5rem;
      padding-right: 1.5rem;
      margin-left: -0.1rem;
      color: #333;
    }
    .block-radio-button > input[type=radio]:checked + .label {
      z-index: 1;
      border: 0.4rem solid #2F80ED;
      padding-left: 1.2rem;
      padding-right: 1.2rem;
      color: #000;
      font-weight: bold;
    }

  </style>
</head>
<body>

<header>
  <form id="get-showtimes-form" action="https://data.tmsapi.com/v1.1/movies/showings" method="GET">
    <div class="input-group">
      <input name="password" type="text" placeholder="Enter the passphrase...">
    </div>
    <div class="input-group">
      <input name="zip" type="text" placeholder="ZIP">
      <select name="radius">
        <option selected>5</option>
        <option>10</option>
        <option>50</option>
        <option>100</option>
      </select>
      <button type="submit">Find</button>
    </div>
    <div id="date-options" class="input-group">
      <label class="block-radio-button"><input value="2017-12-18" name="startDate" type="radio" checked> <span class="label today">Monday<br>Dec 18 (Today)</span></label>
      <label class="block-radio-button"><input value="2017-12-19" name="startDate" type="radio">         <span class="label">Tue<br>Dec 19</span></label>
      <label class="block-radio-button"><input value="2017-12-20" name="startDate" type="radio">         <span class="label">Wed<br>Dec 20</span></label>
      <label class="block-radio-button"><input value="2017-12-21" name="startDate" type="radio">         <span class="label">Thu<br>Dec 21</span></label>
    </div>
    <div class="input-group">
      <label class="block-radio-button"><input value="Theater" name="groupBy" type="radio" checked> <span class="label">Theater</span></label>
      <label class="block-radio-button"><input value="Movie"   name="groupBy" type="radio">         <span class="label">Movie</span></label>
    </div>
  </form>
</header>

<main id="showtimes">
<!-- <section class="primary-section"><h1 class="primary-label">Times Square Cinema</h1><div class="secondary-sections">
<section class="secondary-section"><h2 class="secondary-label">Star Wars: The Last Jedi</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=149052&amp;d=2017-12-18">12:00</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=149052&amp;d=2017-12-18">13:00</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=149052&amp;d=2017-12-18">14:30</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=149052&amp;d=2017-12-18">16:00</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=149052&amp;d=2017-12-18">17:30</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=149052&amp;d=2017-12-18">18:30</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=149052&amp;d=2017-12-18">19:00</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=149052&amp;d=2017-12-18">19:40</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=149052&amp;d=2017-12-18">20:30</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=149052&amp;d=2017-12-18">22:00</a></li></ul></section>
<section class="secondary-section"><h2 class="secondary-label">Wonder</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=167705&amp;d=2017-12-18">11:40</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=167705&amp;d=2017-12-18">15:40</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=167705&amp;d=2017-12-18">19:15</a></li></ul></section>
<section class="secondary-section"><h2 class="secondary-label">Just Getting Started</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=170420&amp;d=2017-12-18">13:40</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=170420&amp;d=2017-12-18">17:10</a></li></ul></section>
<section class="secondary-section"><h2 class="secondary-label">The Star</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=170393&amp;d=2017-12-18">15:10</a></li></ul></section>
<section class="secondary-section"><h2 class="secondary-label">Ferdinand</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=171503&amp;d=2017-12-18">12:50</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=171503&amp;d=2017-12-18">14:00</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=171503&amp;d=2017-12-18">16:20</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=171503&amp;d=2017-12-18">17:20</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=171503&amp;d=2017-12-18">18:40</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=171503&amp;d=2017-12-18">21:00</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=171503&amp;d=2017-12-18">21:40</a></li></ul></section>
<section class="secondary-section"><h2 class="secondary-label">Coco</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=172115&amp;d=2017-12-18">12:15</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=172115&amp;d=2017-12-18">15:00</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATGX&amp;m=172115&amp;d=2017-12-18">21:30</a></li></ul></section></div></section>
<section class="primary-section"><h1 class="primary-label">AMC Tyler 14</h1><div class="secondary-sections">
<section class="secondary-section"><h2 class="secondary-label">Star Wars: The Last Jedi</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=149052&amp;d=2017-12-18">13:00</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=149052&amp;d=2017-12-18">13:30</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=149052&amp;d=2017-12-18">16:30</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=149052&amp;d=2017-12-18">18:00</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=149052&amp;d=2017-12-18">20:00</a></li><li data-threed="true" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=149063&amp;d=2017-12-18">14:00<span class="threed"> <span class="threed-blue">3</span><span class="threed-red">D</span></span></a></li><li data-threed="true" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=149063&amp;d=2017-12-18">14:30<span class="threed"> <span class="threed-blue">3</span><span class="threed-red">D</span></span></a></li><li data-threed="true" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=149063&amp;d=2017-12-18">16:00<span class="threed"> <span class="threed-blue">3</span><span class="threed-red">D</span></span></a></li><li data-threed="true" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=149063&amp;d=2017-12-18">17:00<span class="threed"> <span class="threed-blue">3</span><span class="threed-red">D</span></span></a></li><li data-threed="true" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=149063&amp;d=2017-12-18">17:30<span class="threed"> <span class="threed-blue">3</span><span class="threed-red">D</span></span></a></li><li data-threed="true" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=149063&amp;d=2017-12-18">19:30<span class="threed"> <span class="threed-blue">3</span><span class="threed-red">D</span></span></a></li><li data-threed="false" data-imax="true"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=179048&amp;d=2017-12-18">15:15<span class="imax"> IMAX</span></a></li><li data-threed="false" data-imax="true"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=179048&amp;d=2017-12-18">19:00<span class="imax"> IMAX</span></a></li></ul></section>
<section class="secondary-section"><h2 class="secondary-label">Thor: Ragnarok</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=157889&amp;d=2017-12-18">15:45</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=157889&amp;d=2017-12-18">18:45</a></li></ul></section>
<section class="secondary-section"><h2 class="secondary-label">Justice League</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=158786&amp;d=2017-12-18">13:15</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=158786&amp;d=2017-12-18">16:15</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=158786&amp;d=2017-12-18">19:15</a></li></ul></section>
<section class="secondary-section"><h2 class="secondary-label">Just Getting Started</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=170420&amp;d=2017-12-18">13:50</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=170420&amp;d=2017-12-18">16:20</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=170420&amp;d=2017-12-18">19:05</a></li></ul></section>
<section class="secondary-section"><h2 class="secondary-label">The Star</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=170393&amp;d=2017-12-18">13:35</a></li></ul></section>
<section class="secondary-section"><h2 class="secondary-label">Daddy's Home 2</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=170729&amp;d=2017-12-18">13:25</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=170729&amp;d=2017-12-18">16:05</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=170729&amp;d=2017-12-18">18:50</a></li></ul></section>
<section class="secondary-section"><h2 class="secondary-label">Ferdinand</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=171503&amp;d=2017-12-18">13:20</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=171503&amp;d=2017-12-18">18:40</a></li><li data-threed="true" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=171504&amp;d=2017-12-18">16:10<span class="threed"> <span class="threed-blue">3</span><span class="threed-red">D</span></span></a></li></ul></section>
<section class="secondary-section"><h2 class="secondary-label">Coco</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=172115&amp;d=2017-12-18">14:10</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=172115&amp;d=2017-12-18">16:45</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=172115&amp;d=2017-12-18">19:20</a></li></ul></section>
<section class="secondary-section"><h2 class="secondary-label">Murder on the Orient Express</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=173859&amp;d=2017-12-18">13:40</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=173859&amp;d=2017-12-18">16:40</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=173859&amp;d=2017-12-18">19:45</a></li></ul></section>
<section class="secondary-section"><h2 class="secondary-label">The Man Who Invented Christmas</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=174103&amp;d=2017-12-18">15:30</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AATLA&amp;m=174103&amp;d=2017-12-18">18:15</a></li></ul></section></div></section>
<section class="primary-section"><h1 class="primary-label">Regal Tyler Rose Stadium 14</h1><div class="secondary-sections">
<section class="secondary-section"><h2 class="secondary-label">Star Wars: The Last Jedi</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=149052&amp;d=2017-12-18">12:15</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=149052&amp;d=2017-12-18">13:45</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=149052&amp;d=2017-12-18">17:15</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=149052&amp;d=2017-12-18">19:15</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=149052&amp;d=2017-12-18">20:45</a></li><li data-threed="true" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=149063&amp;d=2017-12-18">13:15<span class="threed"> <span class="threed-blue">3</span><span class="threed-red">D</span></span></a></li><li data-threed="true" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=149063&amp;d=2017-12-18">15:45<span class="threed"> <span class="threed-blue">3</span><span class="threed-red">D</span></span></a></li><li data-threed="true" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=149063&amp;d=2017-12-18">16:45<span class="threed"> <span class="threed-blue">3</span><span class="threed-red">D</span></span></a></li><li data-threed="true" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=149063&amp;d=2017-12-18">20:15<span class="threed"> <span class="threed-blue">3</span><span class="threed-red">D</span></span></a></li><li data-threed="true" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=149063&amp;d=2017-12-18">22:45<span class="threed"> <span class="threed-blue">3</span><span class="threed-red">D</span></span></a></li></ul></section>
<section class="secondary-section"><h2 class="secondary-label">Thor: Ragnarok</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=157889&amp;d=2017-12-18">12:00</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=157889&amp;d=2017-12-18">15:15</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=157889&amp;d=2017-12-18">18:30</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=157889&amp;d=2017-12-18">22:00</a></li></ul></section>
<section class="secondary-section"><h2 class="secondary-label">Justice League</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=158786&amp;d=2017-12-18">12:15</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=158786&amp;d=2017-12-18">15:15</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=158786&amp;d=2017-12-18">18:15</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=158786&amp;d=2017-12-18">21:15</a></li></ul></section>
<section class="secondary-section"><h2 class="secondary-label">Wonder</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=167705&amp;d=2017-12-18">12:00</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=167705&amp;d=2017-12-18">15:00</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=167705&amp;d=2017-12-18">18:00</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=167705&amp;d=2017-12-18">21:00</a></li></ul></section>
<section class="secondary-section"><h2 class="secondary-label">Just Getting Started</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=170420&amp;d=2017-12-18">12:00</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=170420&amp;d=2017-12-18">14:30</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=170420&amp;d=2017-12-18">17:00</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=170420&amp;d=2017-12-18">19:30</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=170420&amp;d=2017-12-18">22:00</a></li></ul></section>
<section class="secondary-section"><h2 class="secondary-label">The Star</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=170393&amp;d=2017-12-18">12:15</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=170393&amp;d=2017-12-18">14:45</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=170393&amp;d=2017-12-18">17:15</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=170393&amp;d=2017-12-18">19:45</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=170393&amp;d=2017-12-18">22:15</a></li></ul></section>
<section class="secondary-section"><h2 class="secondary-label">Daddy's Home 2</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=170729&amp;d=2017-12-18">12:45</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=170729&amp;d=2017-12-18">15:30</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=170729&amp;d=2017-12-18">18:15</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=170729&amp;d=2017-12-18">21:00</a></li></ul></section>
<section class="secondary-section"><h2 class="secondary-label">Ferdinand</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=171503&amp;d=2017-12-18">12:00</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=171503&amp;d=2017-12-18">14:45</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=171503&amp;d=2017-12-18">17:30</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=171503&amp;d=2017-12-18">20:15</a></li></ul></section>
<section class="secondary-section"><h2 class="secondary-label">Coco</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=172115&amp;d=2017-12-18">12:00</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=172115&amp;d=2017-12-18">13:00</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=172115&amp;d=2017-12-18">16:15</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=172115&amp;d=2017-12-18">18:30</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=172115&amp;d=2017-12-18">19:30</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=172115&amp;d=2017-12-18">22:45</a></li><li data-threed="true" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=172117&amp;d=2017-12-18">15:15<span class="threed"> <span class="threed-blue">3</span><span class="threed-red">D</span></span></a></li><li data-threed="true" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=172117&amp;d=2017-12-18">21:45<span class="threed"> <span class="threed-blue">3</span><span class="threed-red">D</span></span></a></li></ul></section>
<section class="secondary-section"><h2 class="secondary-label">Three Billboards Outside Ebbing, Missouri</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=172408&amp;d=2017-12-18">13:00</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=172408&amp;d=2017-12-18">16:00</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=172408&amp;d=2017-12-18">19:00</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=172408&amp;d=2017-12-18">22:00</a></li></ul></section>
<section class="secondary-section"><h2 class="secondary-label">Murder on the Orient Express</h2><ul class="showtime-block"><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=173859&amp;d=2017-12-18">12:30</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=173859&amp;d=2017-12-18">15:30</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=173859&amp;d=2017-12-18">18:30</a></li><li data-threed="false" data-imax="false"><a href="http://www.fandango.com/tms.asp?t=AAKMU&amp;m=173859&amp;d=2017-12-18">21:30</a></li></ul></section></div></section> -->
</main>

<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
<script>

(function(){

    var Marquee = window.Marquee = window.Marquee || {

      apiUrl: 'https://data.tmsapi.com/v1.1/movies/showings?',
      apiShowtimeCache: {},
      apiShowtimeData:  [],

      $showtimes:        document.getElementById('showtimes'),
      $groupButtons:     document.querySelectorAll('[name="groupBy"]'),
      $dateButtons:      document.querySelectorAll('[name="startDate"]'),
      $getShowtimesForm: document.getElementById('get-showtimes-form'),

      init: function() {
        Marquee.loadCookies();
        // Marquee.setupDates();
        Marquee.updateGroupings();

        Marquee.$getShowtimesForm.addEventListener('submit', Marquee.submitShowtimesForm);
        Marquee.$dateButtons.forEach(function(button){
          button.addEventListener('change', Marquee.changeDate);
        });
        Marquee.$groupButtons.forEach(function(button){
          button.addEventListener('change', Marquee.changeGrouping);
        });
      },

      loadCookies: function() {
        var zip      = Cookies.get('zip');
        var password = Cookies.get('password');
        if (zip) {
          document.querySelector('[name="zip"]').setAttribute('value', zip);
        }
        if (password) {
          document.querySelector('[name="password"]').setAttribute('value', password);
        }
      },

      saveCookies: function() {
        Cookies.set('zip', document.querySelector('[name="zip"]').value);
        Cookies.set('password', document.querySelector('[name="password"]').value);
      },

      // setupDates: function() {
      //   var date = new Date;
      //   date = date.toJSON().substring(0, 10);
      //   document.querySelector('[name="startDate"]').setAttribute('value', date);
      // },

      changeDate: function() {
        if (Marquee.submittable()) {
          Marquee.clearData();
          Marquee.fetchMovieTimes();
        }
      },

      submittable: function() {
        return (document.querySelector('[name="zip"]').value !== '');
      },

      changeGrouping: function() {
        Marquee.updateGroupings();
        if (this.checked) {
          Marquee.renderShowtimes();
        }
      },

      updateGroupings: function() {
        Marquee.primaryGroup = document.querySelector('[name="groupBy"]:checked').value;
        Marquee.secondaryGroup = Marquee.primaryGroup == 'Movie' ? 'Theater' : 'Movie';
      },

      submitShowtimesForm: function(event) {
        event.preventDefault();
        if (Marquee.submittable()) {
          Marquee.clearData();
          Marquee.fetchMovieTimes();
        }
      },

      serializeForm: function() {
        return {
          api_key:   document.querySelector('[name="password"]').value,
          zip:       document.querySelector('[name="zip"]').value,
          radius:    document.querySelector('[name="radius"]').value,
          startDate: document.querySelector('[name="startDate"]:checked').value,
        };
      },

      clearData: function() {
        Marquee.apiShowtimeData    = [];
        Marquee.dataForMovie       = {};
        Marquee.dataForTheater     = {};
        Marquee.showtimesByMovie   = {};
        Marquee.showtimesByTheater = {};
        Marquee.showtimeBlocks     = {};
      },

      fetchMovieTimes: function() {
        if (Marquee.cached()) {
          Marquee.renderFromCache();
        } else {
          var request = new XMLHttpRequest();
          request.open('GET', Marquee.apiUrl + Marquee._urlParams(Marquee.serializeForm()), true);
          request.onload = function() {
            if (this.status >= 200 && this.status < 400) {
              Marquee.saveCookies();
              Marquee.apiShowtimeCache[Marquee.makeCacheKey()] = JSON.parse(this.response);
              Marquee.renderFromCache();
            } else {
              alert('Server error');
            }
          };
          request.onerror = function() {
            alert('Connection error');
          };
          request.send();
        }
      },

      makeCacheKey: function() {
        var data = Marquee.serializeForm();
        return data.zip + '--' + data.radius + '--' + data.startDate;
      },

      cached: function() {
        return Marquee.apiShowtimeCache.hasOwnProperty(Marquee.makeCacheKey());
      },

      renderFromCache: function() {
        Marquee.apiShowtimeData = Marquee.apiShowtimeCache[Marquee.makeCacheKey()];
        Marquee.processShowtimes();
        Marquee.renderShowtimes();
      },

      renderShowtimes: function() {
        var html = '';
        var showtimes = Marquee['showtimesBy'+Marquee.primaryGroup];

        Marquee.eachObject(showtimes, function(secondaryObject, primaryId) {
          var primaryEntity = Marquee['dataFor'+Marquee.primaryGroup][primaryId];
          html += '<section class="primary-section">';
          html += '<h1 class="primary-label">'+primaryEntity.label+'</h1>';
          html += '<div class="secondary-sections">';
          Marquee.eachObject(secondaryObject, function(block, secondaryId) {
            var secondaryEntity = Marquee['dataFor'+Marquee.secondaryGroup][secondaryId];
            html += '<section class="secondary-section">';
            html += '<h2 class="secondary-label">'+secondaryEntity.label+'</h2>';
            html += '<ul class="showtime-block">'+block.html+'</ul>';
            html += '</section>';
          });
          html += '</div>';
          html += '</section>';
        });
        Marquee.$showtimes.innerHTML = html;
      },

      processShowtimes: function() {
        Marquee.apiShowtimeData.forEach(function(movie) {
          Marquee.createMovie(movie);
          movie.showtimes.forEach(function(showtime) {
            Marquee.createTheater(showtime.theatre);
            Marquee.seedGroupings(movie.rootId, showtime.theatre.id);
            Marquee.addToShowtimeBlock(movie, showtime);
          });
        });
        Marquee.groupShowtimes();
      },

      createMovie: function(movie) {
        Marquee.dataForMovie[movie.rootId] = Marquee.dataForMovie[movie.rootId] || {
          label:    movie.title,
          year:     movie.releaseYear,
          rating:   movie.ratings ? movie.ratings[0].code : 'n/a',
          language: movie.titleLang,
          runtime:  movie.runTime,
        };
      },

      createTheater: function(theater) {
        Marquee.dataForTheater[theater.id] = Marquee.dataForTheater[theater.id] || {
          label: theater.name, 
        };
      },

      addToShowtimeBlock: function(movie, showtime) {
        var uid = movie.rootId + '-' + showtime.theatre.id;
        Marquee.showtimeBlocks[uid] = Marquee.showtimeBlocks[uid] || {showtimes: [], html: ''};

        var showtimeData = {
          movieId:   movie.rootId,
          theaterId: showtime.theatre.id,
          dateTime:  showtime.dateTime,
          ticket:    showtime.ticketURI,
          threed:    Marquee.is3D(movie),
          imax:      Marquee.isIMAX(movie),
        };
        Marquee.showtimeBlocks[uid].showtimes.push(showtimeData);
        // TODO: Sort this showtime block by movie time (necessitating moving HTML generation out to a separate process).
        Marquee.showtimeBlocks[uid].html += '<li data-threed="'+showtimeData.threed+'" data-imax="'+showtimeData.imax+'">'+Marquee.createShowtimeLink(showtimeData)+'</li>';
      },

      seedGroupings: function(movieId, theaterId) {
        Marquee.showtimesByMovie[movieId] = Marquee.showtimesByMovie[movieId] || {};
        Marquee.showtimesByMovie[movieId][theaterId] = Marquee.showtimesByMovie[movieId][theaterId] || {};
        Marquee.showtimesByTheater[theaterId] = Marquee.showtimesByTheater[theaterId] || {};
        Marquee.showtimesByTheater[theaterId][movieId] = Marquee.showtimesByTheater[theaterId][movieId] || {};
      },

      groupShowtimes: function() {
        Marquee.eachObject(Marquee.showtimeBlocks, function(block, uid) {
          var ids       = uid.split('-');
          var movieId   = ids[0];
          var theaterId = ids[1];
          Marquee.showtimesByMovie[movieId][theaterId]   = block;
          Marquee.showtimesByTheater[theaterId][movieId] = block;
        });
      },

      is3D: function(movie) {
        return (movie.title.indexOf('3D') != -1);
      },

      isIMAX: function(movie) {
        return (movie.title.indexOf('IMAX') != -1);
      },

      createThreeD: function(showtime) {
        return (showtime.threed ? '<span class="threed"> <span class="threed-blue">3</span><span class="threed-red">D</span></span>' : '');
      },

      createIMAX: function(showtime) {
        return (showtime.imax ? '<span class="imax"> IMAX' : '');
      },

      createShowtimeLink: function(showtime) {
        // TODO: Disable if in the past
        return '<a href="'+showtime.ticket+'">'+showtime.dateTime.substr(-5)+Marquee.createThreeD(showtime)+Marquee.createIMAX(showtime)+'</a>';
      },

      _urlParams: function(data) {
        return Object.keys(data).map(function(key) {
          return [key, data[key]].map(encodeURIComponent).join("=");
        }).join("&");
      },

      eachObject: function(obj, fn) {
        for (var key in obj) {
          if (Object.prototype.hasOwnProperty.call(obj, key)) {
            fn(obj[key], key);
          }
        }
      },

    };
    Marquee.init();


})();

</script>  
</body>
</html>